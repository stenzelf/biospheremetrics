---
title: "Computing biospheremetrics"
author: "Fabian Stenzel"
date: "`r Sys.Date()`"
output:
  html_document: default
  # pdf_document: default
  md_document:
    variant: gfm
knit: (function(inputFile, encoding){
  rmarkdown::render(inputFile, encoding = encoding,
  output_format = "all") })
vignette: >
  %\VignetteIndexEntry{Computing biospheremetrics}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

**biospheremetrics** is an R package to calculate two complementary terrestrial 
biosphere integrity indicators: 
* human colonization of the biosphere (BioCol) 
* risk of ecosystem destabilization (EcoRisk)

based on outputs from simulations with a dynamic vegetation model 
(currently only LPJmL <https://github.com/PIK-LPJmL/LPJmL>).
**biospheremetrics** utilizes the read functions of the lpjmlkit (<https://github.com/PIK-LPJmL/lpjmlkit>) package. 

## Preparations
In order to compute the indicators it is thus necessary to first run LPJmL, and 
produce the required outputs.
A list of required outputs per metric (e.g. for EcoRisk with nitrogen) can be 
obtained like this:
```{r}
list_outputs(metric = "ecorisk_nitrogen")
```
```{r}
list_outputs(metric = "ecorisk_nitrogen")
```

## Demo case

The package contains some demo LPJmL simulation data for two cells. 
Define the folders for run (simulation with climate change and land-use) and
pnv (potential natural vegetation - climate change, but no land-use) and a 
temporary output folder, if you want to test to write to files.
```{r}
run_folder <- paste0(system.file("extdata","run","lu_1500_2016",package = "biospheremetrics"),"/")
pnv_folder <- paste0(system.file("extdata","run","pnv_1500_2016",package = "biospheremetrics"),"/")
out_folder <- paste0(tempdir(),"/")
```
## BioCol

```{r}
```
```{r}
```
## Example use
